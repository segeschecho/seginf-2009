%%	SECCION documentclass																									 %%	
%%---------------------------------------------------------------------------%%
\documentclass[a4paper]{report}

%%---------------------------------------------------------------------------%%
%%	SECCION usepackage																											 %%	
%%---------------------------------------------------------------------------%%
\usepackage{amsmath, amsthm}
\usepackage[T1]{fontenc}
\usepackage[scaled]{uarial}
\usepackage[spanish,activeacute]{babel}
\usepackage{caratula}
\usepackage{a4wide}
\usepackage{hyperref}
\usepackage{fancyhdr}
\usepackage{graphicx} % Para el logo magico!
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage[latin1]{inputenc}
\usepackage[dvipsnames,usenames]{color}
\usepackage{amsfonts}
\usepackage{ulem}
\usepackage{highlight}
\usepackage{marvosym}
\usepackage{subfigure}
\usepackage{pdflscape}
\usepackage{color}
\usepackage{colortbl}
\usepackage{float}

%%---------------------------------------------------------------------------%%
%%	SECCION opciones																												 %%	
%%---------------------------------------------------------------------------%%
\parskip    = 11 pt
\headheight	= 13.1pt
\pagestyle	{fancy}
\definecolor{orange}{rgb}{1,0.5,0}

\addtolength{\headwidth}{1.0in}

\addtolength{\oddsidemargin}{-0.5in}
\addtolength{\textwidth}{1.0in}
\addtolength{\topmargin}{-0.5in}
\addtolength{\textheight}{0.7in}
\definecolor{goldenrod}{rgb}{0.85,0.65,0.13}

\newcounter{usCounter}
\setcounter{usCounter}{1}

\newcommand{\us}[4]{
{\setlength{\arrayrulewidth}{1mm}
\framebox{\parbox{16cm}{
{\textsl{\Large \underline{User story \arabic{usCounter}:}}}
\begin{itemize}
\item \underline{\textbf{Como:}} #1
\item \underline{\textbf{Quiero:}} #2
\item \underline{\textbf{De forma que:}} #3
\end{itemize}
\rule{16cm}{0.2mm}
\underline{\textbf{Story points:}} #4
} } }
\addtocounter{usCounter}{1}}

\newcommand{\specus}[3]{
{\setlength{\arrayrulewidth}{1mm}
\framebox{\parbox{16cm}{
\begin{itemize}
\item \underline{\textbf{Como:}} #1
\item \underline{\textbf{Quiero:}} #2
\item \underline{\textbf{De forma que:}} #3
\end{itemize}
} } }
}


%%---------------------------------------------------------------------------%%
%%	SECCION document	 %%	
%%---------------------------------------------------------------------------%%
\begin{document}
\renewcommand{\chaptername}{Parte }

%%---- Caratula -------------------------------------------------------------%%
\materia{Ingenieria de software 2 (2do cuatrimestre de 2009)}
\titulo{Trabajo Práctico}

\integrante{Elizalde Victoria}{??}{??}
\integrante{Gonzalez, Sergio}{??}{??}
\integrante{Mart'inez, Federico}{17/06}{federicoemartinez@gmail.com}
\integrante{Tleye, Sebastian}{??}{??}
%\grupo{Grupo ??}
\resumen{
%TODO
}


% TOC, usa estilos locos
\maketitle
\pagestyle{empty}
{
\fancypagestyle{plain}
    {
    \fancyhead{}
    \fancyfoot{}
    \renewcommand{\headrulewidth}{0.0pt}
    } % clear header and footer of plain page because of ToC
\tableofcontents
}

\newpage
% arreglos los estilos para el resto del documento, y
% reseteo los numeros de pagina para que queden bien
\pagenumbering{arabic}
\fancypagestyle{plain} {
    \fancyhead[LO]{Elizalde,Gonzalez, Martínez, Tleye}
    \fancyhead[C]{}
    \fancyhead[RO]{P\'agina \thepage\ de \pageref{LastPage}}
    \fancyfoot{}
    \renewcommand{\headrulewidth}{0.4pt}
}
\pagestyle{plain}
\chapter{Introducción}
A lo largo de este informe presentaremos el trabajo de implementación realizado para la materia Seguridad de la Información.

El informe se organiza de la siguiente manera:
\begin{enumerate}
\item Consideraciones generales: Descripcion general de la aplicación: lenguaje de programación utilizado, modelado de la base de datos, etc.
\item Sniffer: Descripción de la implementación del sniffer
\item Reportes: Descripción de la herramienta para la generación de reportes
\item Instalación y uso: Documnetación sobre como armar el ambiente para utilizar el software y como usarlo
\end{enumerate}

\chapter{Consideraciones generales}
\section{Plataforma}
El trabajo fue realizado y probado en Linux Mint 7: Gloria, el cual esta basado en Ubuntu Jaunty. Creemos que el software debería funcionar en otras distribuciones Linux sin problemas, no asi en windows, ya que scapy (una libreria de la cual hablaremos mas adelante) no se encuentra disponible para windows (aunque existe un port\footnote{http://trac.secdev.org/scapy/wiki/WindowsInstallationGuide} que supuestamente brinda casi todas las posibilidades de scapy en windows, no lo probamos).

\section{Lenguaje de programación}
Para la realización del proyecto utilizamos el lenguaje python, el cual varios miembros del grupo utilizamos. Consideramos que el desarrollo en este lenguaje es sencillo, lo cual permitia que el resto del grupo puede familiarisarse rapidamente con el, ya que no habia un lenguaje manejado por todos.

Las ventaja principal que presenta es justamente que permite una velocidad alta para el desarrollo, sin embargo como contra la performance no es comparable a la que podriamos haber obtenido usando otro lenguaje como por ejemplo C++.

\section{Base de datos}
Para la realización del trabajo era necesario la utilización de una base de datos para poder almacenar el tráfico sniffeado y luego poder analizarlo. Por una cuestión de simplicidad se utilizó el motor sqlite, sin embargo es muy simple de cambiar, a fin de utilizar otro motor mas robusto como puede ser mySQL.

\subsection{SQLAlchemy}
Para facilitarnos la interacción con la base de datos decidimos utilizar SQLAlchemy, un ORM para python que es bastante flexible, ademas de simple de utilizar.

Definimos entonces las siguientes clases para hacer el mapeo a la base de datos:
\begin{itemize}
\item MensajeHTTP: Es la clase base de los mensajes HTTP. Posee las caracteristicas generales de los mensajes, ya sean requests, o responses; como pueden ser los headers, el body, direcciones ip o los puertos.
\item RequestHTTP: Subclase de MensajeHTTP, guarda la uri, el metodo y el identificador del response asociado (si corresponde)
\item ResponseHTTP: Subclase de MensajeHTTP, guarda el codigo de respuesta y el mensaje de status
\item RequestNoHTTP: Clase que representa aquellos mensajes sniffeados que no corresponden a trafico HTTP (por ejemplo SSH, o HTTPS) y que provienen desde algun host hacia el proxy.
\item ResponseNoHTTP: Similar a la anterior, pero para los mensajes que provienen del proxy a un host de la red.
\end{itemize}

\begin{figure}[H]
\centering
\includegraphics[scale=1]{./figuras/persistencia.png}
\caption{Diagrama con las clases que mapean a la base de datos}
\end{figure}

\input{sniffer}

\input{reporTool}
\chapter{Instalación y uso}

\label{LastPage}
\end{document}
